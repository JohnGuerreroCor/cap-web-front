<app-navbar>
  <div class="row m-4">
    <div class="col-sm-4 p-4 panel">
      <h4 class="font-usco-gr font-weight-bold pl-1 pb-3">Actas</h4>
      <!-- Card 1 -->
      <div class="card mb-3 card-custom" *ngFor="let item of listadoActas">
        <div class="card-body pl-4 pr-4">
          <h5 class="card-title font-usco-gr font-weight-bold">
            {{ item.nombre }}
          </h5>
          <div class="row mb-3">
            <div class="col font-usco-gr">
              <strong>Desde:</strong> {{ item.inicio | date : "dd/MM/yyyy" }}
            </div>
            <div class="col font-usco-gr">
              <strong>Hasta:</strong> {{ item.fin | date : "dd/MM/yyyy" }}
            </div>
          </div>
          <p class="card-text text-small font-usco-gr">
            {{ item.descripcion }}
          </p>
          <div class="d-flex justify-content-between align-items-center">
            <button
              *ngIf="item.estadoActa.codigo == 2"
              class="btn btn-yellow btn-sm text-white mr-2"
              style="padding: 0px 4px 0px 4px"
            >
              <i class="fa-regular fa-circle-dot"></i>
              Cerrada
            </button>
            <button
              *ngIf="item.estadoActa.codigo == 1"
              class="btn btn-success btn-sm text-white mr-2"
              style="padding: 0px 4px 0px 4px"
            >
              <i class="fa-regular fa-circle-dot"></i>
              Activa
            </button>
            <a
              *ngIf="item.estadoActa.codigo == 1"
              [routerLink]="['/solicitud', item.codigo]"
              class="font-usco-vt text-decoration-none font-weight-bold"
              >Realizar solicitud</a
            >
            <a
              *ngIf="item.estadoActa.codigo == 2"
              href="#"
              class="font-usco-vt text-decoration-none font-weight-bold"
              >Revisar solicitudes</a
            >
          </div>
        </div>
      </div>
    </div>
    <div class="col p-4 ml-3 panel">
      <h4 class="font-usco-gr font-weight-bold pl-1 pb-3">
        Solicitudes actuales realizadas
      </h4>
      <table
        mat-table
        [dataSource]="dataSource"
        class="table table-hover shadow-sm"
      >
        <ng-container matColumnDef="index">
          <th mat-header-cell *matHeaderCellDef>N°</th>
          <td
            mat-cell
            *matCellDef="let element"
            class="font-sm-usco font-usco-gr"
          >
            {{ dataSource.filteredData.indexOf(element) + 1 }}
          </td>
        </ng-container>
        <ng-container matColumnDef="material">
          <th mat-header-cell *matHeaderCellDef>Material</th>
          <td
            mat-cell
            *matCellDef="let element"
            class="font-sm-usco font-usco-gr"
          >
            {{
              element.materialAcademico.materialConfiguracion.tipoMaterial
                .nombre
            }}
          </td>
        </ng-container>
        <ng-container matColumnDef="fecha">
          <th mat-header-cell *matHeaderCellDef>Fecha</th>
          <td
            mat-cell
            *matCellDef="let element"
            class="font-sm-usco font-usco-gr"
          >
            {{ element.fecha | date : "dd-MM-yyyy hh:MM a" }}
          </td>
        </ng-container>
        <ng-container matColumnDef="estado">
          <th mat-header-cell *matHeaderCellDef>Estado</th>
          <td
            mat-cell
            *matCellDef="let element"
            class="font-sm-usco font-usco-gr"
          >
            <button
              *ngIf="element.estadoSolicitud.codigo == 1"
              class="btn btn-yellow btn-sm text-white mr-2"
              style="padding: 0px 4px 0px 4px"
            >
              <i class="fa-regular fa-circle-dot"></i>
              {{ element.estadoSolicitud.nombre }}
            </button>
            <button
              *ngIf="element.estadoSolicitud.codigo == 2"
              class="btn btn-success btn-sm text-white mr-2"
              style="padding: 0px 4px 0px 4px"
            >
              <i class="fa-solid fa-check"></i>
              {{ element.estadoSolicitud.nombre }}
            </button>
            <button
              *ngIf="element.estadoSolicitud.codigo == 3"
              class="btn btn-danger btn-sm text-white mr-2"
              style="padding: 0px 4px 0px 4px"
            >
              <i class="fa-solid fa-xmark"></i>
              {{ element.estadoSolicitud.nombre }}
            </button>
            <button
              *ngIf="element.estadoSolicitud.codigo == 4"
              class="btn btn-secondary btn-sm text-white mr-2"
              style="padding: 0px 4px 0px 4px"
            >
              <i class="fa-solid fa-ban"></i>
              {{ element.estadoSolicitud.nombre }}
            </button>
            <button
              *ngIf="element.estadoSolicitud.codigo == 5"
              class="btn btn-info btn-sm text-white mr-2"
              style="padding: 0px 4px 0px 4px"
            >
              <i class="fa-solid fa-check-double"></i>
              {{ element.estadoSolicitud.nombre }}
            </button>
            <button
              *ngIf="element.estadoSolicitud.codigo == 6"
              class="btn btn-primary btn-sm text-white mr-2"
              style="padding: 0px 4px 0px 4px"
            >
              <i class="fa-solid fa-spinner"></i>
              {{ element.estadoSolicitud.nombre }}
            </button>
            <button
              *ngIf="element.estadoSolicitud.codigo == 7"
              class="btn btn-orange btn-sm text-white mr-2"
              style="padding: 0px 4px 0px 4px"
            >
              <i class="fa-solid fa-arrow-rotate-left"></i>
              {{ element.estadoSolicitud.nombre }}
            </button>
          </td>
        </ng-container>
        <ng-container matColumnDef="opciones">
          <th mat-header-cell *matHeaderCellDef>Acciones</th>
          <td mat-cell *matCellDef="let element" class="font-sm-usco">
            <a
              *ngIf="
                element.estadoSolicitud.codigo == 2 ||
                element.estadoSolicitud.codigo == 1 ||
                element.estadoSolicitud.codigo == 5 ||
                element.estadoSolicitud.codigo == 3 ||
                element.estadoSolicitud.codigo == 4
              "
              [routerLink]="['/revision-solicitud', element.codigo]"
              class="font-usco-vt text-decoration-none font-weight-bold"
              >Ver más</a
            >
            <a
              *ngIf="element.estadoSolicitud.codigo == 7"
              [routerLink]="['/revision-solicitud', element.codigo]"
              class="font-usco-vt text-decoration-none font-weight-bold"
              >Corregir</a
            >
          </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        <!-- No Data Row -->
        <tr class="mat-row text-center" *matNoDataRow>
          <td class="mat-cell" [attr.colspan]="displayedColumns.length">
            No hay registros por el momento
          </td>
        </tr>
      </table>
      <mat-paginator
        [pageSizeOptions]="[10, 20, 30]"
        showFirstLastButtons
      ></mat-paginator>
    </div>
  </div>
</app-navbar>
